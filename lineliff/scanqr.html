<!doctype html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SCAN QR</title>
</head>

<body>
    <p id="displayname"></p>
    <p id="scanCode"></p>
    <p>
        <button id="btnScanCode" onclick="scanCode();">Scan Code</button>
    </p>
    
    <script src="https://static.line-scdn.net/liff/edge/2.1/liff.js"></script>
    <script>
        function scanCode() {
            liff.scanCode()
            .then(result => {
                const stringifiedResult = JSON.stringify(result);
                alert(stringifiedResult);
                //document.getElementById("scanCode").textContent = stringifiedResult;
                document.getElementById("scanCode").textContent = result.value;
            });
        }
        liff.init({ liffId: "1655655249-gAvyPpYD" }, () => {
            if (!liff.isLoggedIn()) {
                liff.login();
            }else{
                liff.getProfile()
                    .then(profile => {
                        const name = profile.displayName;
                        document.getElementById("displayname").innerText = name;
                    })
            }
         }, err => console.error(err.code, error.message));
    </script>
</body>

</html>