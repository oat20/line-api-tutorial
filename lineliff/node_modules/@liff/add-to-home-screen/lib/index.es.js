import{__awaiter as t,__generator as n}from"tslib";import{createLiffError as i,qs as e}from"@liff/util";import{FORBIDDEN as o,INVALID_ARGUMENT as r}from"@liff/consts";import{isSubWindow as a}from"@liff/is-sub-window";import{CheckAvailability as s}from"@liff/check-availability";var f=0;function l(t,n){if(!n.isInClient())throw i(o,"addToHomeScreen() can only be called in client");if(a())throw i(o,"The operation is not allowed in the SubWindow");if(!new s(n).invoke("addToHomeScreen"))throw i(o,"No permission for liff.addToHomeScreen()");if(!(t&&t.name&&t.iconUrl&&t.state))throw i(r,"Invalid parameters for liff.addToHomeScreen()");return!0}function c(i){return function(o){return t(this,void 0,void 0,(function(){var t,r,a,s;return n(this,(function(n){return l(o,i),t=o.name,r=o.iconUrl,(a=o.state).startsWith("/")&&(a=a.substring(1)),s={label:t,iconUrl:r,schemePath:"app/"+i.id+"/?liff.state="+encodeURIComponent("/"+a)},i.openWindow({url:"https://line.me/channel/shortcut?"+e.stringify(s),external:!0}),[2,f]}))}))}}function u(i){return function(e){return t(this,void 0,void 0,(function(){var t,o,r;return n(this,(function(n){switch(n.label){case 0:return l(e,i),t=e.name,o=e.iconUrl,(r=e.state).startsWith("/")&&(r=r.substring(1)),[4,i._call("addToHomeScreen",{name:t,iconUrl:o,state:r})];case 1:return[2,n.sent().status]}}))}))}}export{u as android,c as ios};
