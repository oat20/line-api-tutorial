"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,o=require("tslib"),n=require("@liff/consts"),i=require("@liff/util"),t=require("@liff/sub-window"),r=require("@liff/is-api-available"),s=function(){function o(e,o){var n=this;this.resolve=e,this.reject=o,this.onSubmit=function(e){var o=e.message;n.resolve({value:o}),n.destroy()},this.onClose=function(){n.resolve({value:null}),n.destroy()},this.onCancel=function(){n.resolve({value:null}),n.destroy()},this.onError=function(e){n.reject(e),n.destroy()},this.start()}return o.prototype.start=function(){t.subWindow.on("submit",this.onSubmit),t.subWindow.on("close",this.onClose),t.subWindow.on("cancel",this.onCancel),t.subWindow.on("error",this.onError)},o.prototype.destroy=function(){t.subWindow.off("submit",this.onSubmit),t.subWindow.off("close",this.onClose),t.subWindow.off("cancel",this.onCancel),t.subWindow.off("error",this.onError),e=void 0},o}();function u(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(o){if(!r.isApiAvailable("subwindowOpen")||!r.isApiAvailable("scanCodeV2"))throw i.createLiffError(n.FORBIDDEN,"No permission for liff.scanCodeV2()");return e&&e.destroy(),[2,new Promise((function(o,n){e=new s(o,n),t.subWindow.open({url:"https://liff.line.me/1656359117-jxmx5e11"})}))]}))}))}var l=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"scanCodeV2"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return u},e}(),f=new l;exports.ScanCodeV2Module=l,exports.module=f;
