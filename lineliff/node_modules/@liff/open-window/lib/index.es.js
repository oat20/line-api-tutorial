import{__read as i}from"tslib";import{INVALID_ARGUMENT as o}from"@liff/consts";import{createLiffError as n,compareVersion as e}from"@liff/util";import{isInClient as f}from"@liff/is-in-client";import{getOS as r}from"@liff/get-os";import{getLineVersion as t}from"@liff/get-line-version";import{call as l}from"@liff/native-bridge";function p(p){if(!function(o){if(!o||"object"!=typeof o)return!1;var n=o,e=n.url,f=n.external,r=i([typeof e,typeof f],2),t=r[0],l=r[1];return"string"===t&&""!==e&&("undefined"===l||"boolean"===l)}(p))throw n(o,"Invalid parameters for liff.openWindow()");var s=t();if(f())if(null!==s&&"ios"===r()&&e(s,"9.19")>=0||!window._liff.postMessage){var a=p.url,m=p.external,d=void 0!==m&&m;window.open(function(o,n){var e=i(o.split("?"),2),f=e[0],r=e[1],t=i((void 0===r?"":r).split("#"),2),l=t[0],p=t[1];return f+"?is_liff_external_open_window="+!!n+(l?"&"+l.split("&").filter((function(i){return-1===i.indexOf("is_liff_external_open_window")})).join("&").concat(p?"#"+p:""):"")}(a,d))}else l("openWindow",p);else window.open(p.url,"_blank")}export{p as openWindow};
